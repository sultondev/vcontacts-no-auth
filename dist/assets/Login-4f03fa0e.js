import{e as g,n as w,o as b,c as v,a as i,i as y,b as r,w as l,r as $,u,d as f}from"./index-f46db68c.js";import{p as k}from"./axios.config-2fec0e98.js";import{u as C,a as p,b as S,r as m,_ as x}from"./useForm-2ae3b4d6.js";const I={class:"reg"},N={class:"container flex mx-auto lg:flex-row sm:flex-col min-h-screen sm:justify-center lg:justify-auto items-center"},V={class:""},j=i("h6",{class:"text-3xl text-[#0080D0] uppercase text-center font-bold"}," V Contacts ",-1),B=i("p",{class:"text-white text-center text-2xl m-4"},"Login",-1),E=["onSubmit"],F=g({__name:"Login",setup(L){const t=C({identifier:"",password:""},{identifier:{required:m},password:{required:m}}),a=w({loading:!1,error:!1});async function _(){t.$v.value.$touch(),t.$v.value.$invalid||(a.loading=!0,await k.post("/auth/local",JSON.stringify(t.values)).then(e=>{e.status===200&&(localStorage.setItem("token",e.data.jwt),location.reload())}).catch(e=>{console.log(e),a.error=!0}).finally(()=>{a.loading=!1}))}function c(e,d){t.values[d]=e}return(e,d)=>{const h=$("router-link");return b(),v("section",I,[i("div",N,[i("div",V,[j,B,i("form",{onSubmit:y(_,["prevent"]),class:"flex flex-col gap-4"},[r(p,{title:"Username",class:"text-white"},{default:l(()=>{var s,o,n;return[r(x,{"prefix-classes":"mr-1",class:"py-1 px-2 rounded-md border-2 text-white bg-transparent","field-key":"identifier",placeholder:"Enter username or email",onInputChange:c,error:((n=(o=(s=u(t).$v)==null?void 0:s.value)==null?void 0:o.identifier)==null?void 0:n.$error)||a.error,max:"20"},null,8,["error"])]}),_:1}),r(p,{title:"Password",class:"text-white"},{default:l(()=>{var s,o,n;return[r(x,{"prefix-classes":"mr-1",class:"py-1 px-2 rounded-md border-2 text-white bg-transparent","field-key":"password",placeholder:"Enter password",type:"password",onInputChange:c,max:"30",error:((n=(o=(s=u(t).$v)==null?void 0:s.value)==null?void 0:o.password)==null?void 0:n.$error)||a.error},null,8,["error"])]}),_:1}),r(S,{type:"submit","aria-label":"Submit","spinner-color":"#cdcdcd",class:"bg-[#2A0096] text-white py-2 rounded-xl text-center disabled:opacity-50",loading:a.loading},{default:l(()=>[f(" Login ")]),_:1},8,["loading"])],40,E),r(h,{to:"/registration",class:"block mt-4 text-gray-500 text-center text-xs"},{default:l(()=>[f(" I don't have account ")]),_:1})])])])}}});export{F as default};
